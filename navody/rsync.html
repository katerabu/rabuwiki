<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>rsync â€“ zÃ¡lohovÃ¡nÃ­ v linuxu</title></head>
<body>
<h1>ğŸ” <code>rsync</code> â€“ efektivnÃ­ synchronizace souborÅ¯</h1>
<p><code>rsync</code> je mocnÃ½ nÃ¡stroj pro synchronizaci souborÅ¯ a adresÃ¡Å™Å¯ mezi dvÄ›ma mÃ­sty â€“ lokÃ¡lnÄ› i pÅ™es sÃ­Å¥. UmÃ­ pÅ™enÃ¡Å¡et pouze zmÄ›ny, zachovÃ¡vat oprÃ¡vnÄ›nÃ­ a je ideÃ¡lnÃ­ pro zÃ¡lohovÃ¡nÃ­.</p>
<hr />
<h2>ğŸ“¦ ZÃ¡kladnÃ­ syntaxe</h2>
<pre><code class="language-bash">rsync [volby] zdroj cÃ­l
</code></pre>
<p>NapÅ™Ã­klad:</p>
<pre><code class="language-bash">rsync -av /home/user/ /mnt/backup/home/
</code></pre>
<ul>
<li><code>-a</code> â€“ archivnÃ­ mÃ³d (zachovÃ¡ symlinky, oprÃ¡vnÄ›nÃ­, Äasy, atd.)</li>
<li><code>-v</code> â€“ verbose (vÃ½stupnÃ­ informace)</li>
</ul>
<blockquote>
<p>ğŸ”¹ Uvozovka <strong>/ na konci zdrojovÃ©ho adresÃ¡Å™e</strong> znamenÃ¡ "obsah adresÃ¡Å™e", bez lomÃ­tka by kopÃ­roval i samotnÃ½ adresÃ¡Å™.</p>
</blockquote>
<hr />
<h2>ğŸ“ PraktickÃ© pÅ™Ã­klady</h2>
<h3>1. ğŸ“¥ LokÃ¡lnÃ­ kopie dat</h3>
<pre><code class="language-bash">rsync -av /data/ /backup/data/
</code></pre>
<p>Synchronizuje obsah <code>/data/</code> do <code>/backup/data/</code>.</p>
<h3>2. ğŸŒ Kopie pÅ™es SSH</h3>
<pre><code class="language-bash">rsync -av -e ssh /home/user/ user@remote:/backup/user/
</code></pre>
<p>PÅ™enese soubory pÅ™es SSH na vzdÃ¡lenÃ½ server.</p>
<h3>3. ğŸ”„ Z obou stran synchronizovat zmÄ›ny (pomocÃ­ <code>--update</code>)</h3>
<pre><code class="language-bash">rsync -avu /source/ /dest/
</code></pre>
<p>Volba <code>--update</code> zaruÄuje, Å¾e novÄ›jÅ¡Ã­ soubory nebudou pÅ™epsÃ¡ny starÅ¡Ã­mi.</p>
<hr />
<h2>ğŸ§¹ MazÃ¡nÃ­ souborÅ¯, kterÃ© uÅ¾ nejsou ve zdroji</h2>
<pre><code class="language-bash">rsync -av --delete /src/ /dst/
</code></pre>
<p>SmaÅ¾e soubory v cÃ­li, kterÃ© uÅ¾ neexistujÃ­ ve zdroji.</p>
<blockquote>
<p>âš ï¸ PouÅ¾Ã­vej opatrnÄ› â€“ mÅ¯Å¾eÅ¡ pÅ™ijÃ­t o data.</p>
</blockquote>
<hr />
<h2>ğŸ“‘ VylouÄenÃ­ souborÅ¯</h2>
<pre><code class="language-bash">rsync -av --exclude '*.tmp' /src/ /dst/
</code></pre>
<p>Ignoruje vÅ¡echny soubory s pÅ™Ã­ponou <code>.tmp</code>.</p>
<hr />
<h2>ğŸ” SuchÃ½ bÄ›h (co by rsync udÄ›lal)</h2>
<pre><code class="language-bash">rsync -av --dry-run /src/ /dst/
</code></pre>
<p>NevykonÃ¡ akci, jen vypÃ­Å¡e, co by se stalo.</p>
<hr />
<h2>ğŸ’¡ UÅ¾iteÄnÃ© pÅ™epÃ­naÄe</h2>
<table>
<thead>
<tr>
<th>PÅ™epÃ­naÄ</th>
<th>Popis</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-a</code></td>
<td>ArchivnÃ­ mÃ³d (rekurze, symlinky, Äasy, oprÃ¡vnÄ›nÃ­â€¦)</td>
</tr>
<tr>
<td><code>-v</code></td>
<td>Verbose â€“ vÃ½pis akcÃ­</td>
</tr>
<tr>
<td><code>--delete</code></td>
<td>Smazat soubory v cÃ­li, kterÃ© nejsou ve zdroji</td>
</tr>
<tr>
<td><code>--exclude</code></td>
<td>Vynechat soubory podle vzoru</td>
</tr>
<tr>
<td><code>--progress</code></td>
<td>Zobrazit prÅ¯bÄ›h kopÃ­rovÃ¡nÃ­</td>
</tr>
<tr>
<td><code>--dry-run</code></td>
<td>Zobrazit, co by se stalo, ale neprovÃ¡dÄ›t zmÄ›ny</td>
</tr>
<tr>
<td><code>-e ssh</code></td>
<td>PÅ™enos pÅ™es SSH</td>
</tr>
<tr>
<td><code>--update</code></td>
<td>NepÅ™episuj novÄ›jÅ¡Ã­ soubory</td>
</tr>
</tbody>
</table>
<hr />
<h2>ğŸ§ª TestovacÃ­ pÅ™Ã­klad</h2>
<pre><code class="language-bash">rsync -av --dry-run --delete /home/user/ /mnt/backup/home/
</code></pre>
<p>Simuluje synchronizaci <code>/home/user/</code> do zÃ¡lohy na <code>/mnt/backup/home/</code>, vÄetnÄ› mazÃ¡nÃ­ souborÅ¯, kterÃ© jiÅ¾ ve zdroji nejsou.</p>
<hr />
<h2>ğŸ›¡ï¸ Tipy pro bezpeÄnÃ© pouÅ¾itÃ­</h2>
<ul>
<li>Nejprve si vÅ¾dy vyzkouÅ¡ej pÅ™Ã­kaz s <code>--dry-run</code></li>
<li>Dbej na sprÃ¡vnÃ© lomÃ­tko na konci cest (<code>/</code>)</li>
<li>PÅ™ed pouÅ¾itÃ­m <code>--delete</code> zÃ¡lohuj cÃ­lovÃ¡ data</li>
<li>VytvÃ¡Å™ej skripty pro pravidelnou zÃ¡lohu s logovÃ¡nÃ­m</li>
</ul>
<hr />
<h2>ğŸ“š DalÅ¡Ã­ odkazy</h2>
<ul>
<li><a href="https://man7.org/linux/man-pages/man1/rsync.1.html">OficiÃ¡lnÃ­ man page rsync</a></li>
<li><a href="https://wiki.archlinux.org/title/rsync">rsync na ArchWiki</a></li>
<li><a href="https://linuxize.com/post/how-to-use-rsync-for-local-and-remote-data-transfer-and-synchronization/">rsync examples</a></li>
</ul>
<p><a href="../index.html">â† ZpÄ›t na pÅ™ehled</a></p>
</body>
</html>
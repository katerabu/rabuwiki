<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>btrfs</title>
  <!-- GitHub Markdown CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown.min.css">
  <style>
    body {
      max-width: 900px;
      margin: 2em auto;
      padding: 1em 2em;
      background-color: #fff;
    }
    .markdown-body table {
      border-collapse: collapse;
      width: 100%;
      margin-bottom: 1em;
    }
    .markdown-body th,
    .markdown-body td {
      border: 1px solid #d0d7de;
      padding: 6px 13px;
    }
    .markdown-body th {
      background-color: #f6f8fa;
      font-weight: 600;
      text-align: left;
    }
  </style>
</head>
<body>
  <article class="markdown-body">
<pre><code class="language-markdown"># ğŸ§± Btrfs â€“ modernÃ­ souborovÃ½ systÃ©m

Btrfs (B-tree File System) je modernÃ­ souborovÃ½ systÃ©m pro Linux, navrÅ¾enÃ½ jako nÃ¡hrada za ext4, ZFS a dalÅ¡Ã­. Je zamÄ›Å™en na spolehlivost, Å¡kÃ¡lovatelnost a pokroÄilÃ© funkce.

---

## ğŸ•°ï¸ KrÃ¡tkÃ¡ historie

- VÃ½voj zahÃ¡jen 2007 (Chris Mason, pÅ¯vodnÄ› Oracle)
- HlavnÃ­ cÃ­le:
  - snapshots (snÃ­mky)
  - checksumming (ochrana dat)
  - komprese
  - vestavÄ›nÃ½ RAID
  - copy-on-write (COW)
- Od jÃ¡dra Linuxu 2.6.29 (2009) dostupnÃ½ v mainline kernelu
- Dnes stabilnÃ­ a podporovanÃ½ ve vÄ›tÅ¡inÄ› distribucÃ­ (napÅ™. openSUSE, Fedora, Ubuntu, Debian)

---

## ğŸ§© KlÃ­ÄovÃ© vlastnosti

| Funkce                | Popis |
|-----------------------|-------|
| **Copy-on-Write (CoW)** | NovÃ¡ data jsou zapsÃ¡na vedle starÃ½ch â€“ Å¡etÅ™Ã­ disk a zvyÅ¡uje bezpeÄnost |
| **Snapshots**          | RychlÃ© a efektivnÃ­ zÃ¡lohovÃ¡nÃ­ celÃ½ch stavÅ¯ FS |
| **Subvolume**          | OddÄ›lenÃ© oddÃ­ly uvnitÅ™ jednoho Btrfs FS |
| **TransparentnÃ­ komprese** | Podpora Zlib, Zstd, LZO |
| **Checksumming**       | Detekce a oprava chyb na Ãºrovni dat i metadata |
| **VestavÄ›nÃ½ RAID**     | RAID 0/1/10/5/6 bez potÅ™eby externÃ­ho softwaru |
| **Send/Receive**       | EfektivnÃ­ pÅ™enos snapshotÅ¯ mezi systÃ©my |

---

## ğŸ”§ PouÅ¾itÃ­ v Linuxu â€“ zÃ¡kladnÃ­ pÅ™Ã­kazy

### ğŸ“ VytvoÅ™enÃ­ Btrfs souborovÃ©ho systÃ©mu

```bash
sudo mkfs.btrfs /dev/sdX
</code></pre>
<h3>ğŸ” ZjiÅ¡tÄ›nÃ­ info o souborovÃ©m systÃ©mu</h3>
<pre><code class="language-bash">sudo btrfs filesystem show
sudo btrfs filesystem df /mnt
</code></pre>
<h3>ğŸ“¦ PÅ™ipojenÃ­ se subvolume</h3>
<pre><code class="language-bash">sudo mount -o subvol=@ /dev/sdX /mnt
</code></pre>
<h3>ğŸ“¸ Snapshoty</h3>
<pre><code class="language-bash">sudo btrfs subvolume snapshot /mnt/@ /mnt/@_snapshot_nazev
</code></pre>
<h3>ğŸ§¹ MazÃ¡nÃ­ snapshotu</h3>
<pre><code class="language-bash">sudo btrfs subvolume delete /mnt/@_snapshot_nazev
</code></pre>
<h3>ğŸ’¾ Send/Receive (zÃ¡lohovÃ¡nÃ­)</h3>
<pre><code class="language-bash">sudo btrfs send /mnt/@_snapshot_nazev | gzip &gt; snapshot.gz
</code></pre>
<hr />
<h2>ğŸ§ª TestovÃ¡nÃ­ a lab</h2>
<pre><code class="language-bash">sudo mkfs.btrfs /dev/loop0
sudo mount /dev/loop0 /mnt/test
sudo btrfs subvolume create /mnt/test/@home
sudo btrfs subvolume snapshot /mnt/test/@home /mnt/test/@home_snapshot
</code></pre>
<hr />
<h2>âš ï¸ Na co si dÃ¡t pozor</h2>
<ul>
<li>RAID5/6 stÃ¡le <strong>experimentÃ¡lnÃ­</strong> â€“ pouÅ¾Ã­vat s opatrnostÃ­</li>
<li>Fragmentace u velkÃ½ch zÃ¡pisÅ¯ â€“ sledovat pomocÃ­:
  <code>bash
  sudo btrfs filesystem defragment -r /mnt</code></li>
<li>Snapshoty nesmaÅ¾ou pÅ¯vodnÃ­ data â€“ pozor na mÃ­sto na disku</li>
</ul>
<hr />
<h2>ğŸ’» Btrfs ve Windows</h2>
<p>Btrfs nenÃ­ oficiÃ¡lnÄ› podporovanÃ½ ve Windows, ale existujÃ­ zpÅ¯soby:</p>
<h3>ğŸ› ï¸ WinBtrfs</h3>
<ul>
<li>OtevÅ™enÃ½ ovladaÄ pro Windows:
  ğŸ”— https://github.com/maharmstone/btrfs</li>
<li>UmoÅ¾Åˆuje ÄtenÃ­ i zÃ¡pis Btrfs diskÅ¯</li>
<li>Podpora subvolumes a RAID</li>
</ul>
<h3>ğŸ”’ PÅ™Ã­stup pÅ™es WSL2</h3>
<ul>
<li>NenÃ­ pÅ™Ã­mÃ¡ podpora Btrfs</li>
<li>MoÅ¾nosti:</li>
<li>Mount pÅ™es <code>WinBtrfs</code></li>
<li>Nebo pÅ™Ã­stup pÅ™es sdÃ­lenÃ½ disk z Linux VM</li>
</ul>
<hr />
<h2>ğŸ“Œ Kde se Btrfs pouÅ¾Ã­vÃ¡</h2>
<ul>
<li><strong>openSUSE</strong> â€“ vÃ½chozÃ­ FS</li>
<li><strong>Fedora</strong> â€“ od verze 33 vÃ½chozÃ­</li>
<li><strong>Ubuntu</strong> â€“ dostupnÃ½, ale nenÃ­ vÃ½chozÃ­</li>
<li>VhodnÃ½ pro:</li>
<li>NAS servery</li>
<li>Snapshot/zÃ¡lohovÃ¡nÃ­ desktopÅ¯</li>
<li>VirtuÃ¡lnÃ­ prostÅ™edÃ­</li>
</ul>
<hr />
<h2>ğŸ“š Odkazy</h2>
<ul>
<li><a href="https://btrfs.readthedocs.io/en/latest/">OficiÃ¡lnÃ­ wiki Btrfs</a></li>
<li><a href="https://wiki.archlinux.org/title/Comparison_of_file_systems">ArchWiki â€“ Comparison of file systems</a></li>
<li><a href="https://man7.org/linux/man-pages/man8/btrfs.8.html">Btrfs man pages</a></li>
<li><a href="https://github.com/maharmstone/btrfs">WinBtrfs projekt na GitHubu</a>
```</li>
</ul>
    <p><a href="../index.html">â† ZpÄ›t</a></p>
  </article>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>esp32-mqtt</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown.min.css">
  <style>
    body {
      max-width: 900px;
      margin: 2em auto;
      padding: 1em 2em;
      background-color: #fff;
    }
    .markdown-body table {
      border-collapse: collapse;
      width: 100%;
      margin-bottom: 1em;
    }
    .markdown-body th, .markdown-body td {
      border: 1px solid #d0d7de;
      padding: 6px 13px;
    }
    .markdown-body th {
      background-color: #f6f8fa;
      font-weight: 600;
      text-align: left;
    }
  </style>
</head>
<body>
  <article class="markdown-body">
<pre><code class="language-markdown"># â˜ï¸ ESP32 â€“ MQTT klient pomocÃ­ ESP-IDF

UkÃ¡zka, jak vytvoÅ™it jednoduchÃ©ho MQTT klienta na ESP32 pomocÃ­ knihovny z ESP-IDF.

---

## ğŸ“¦ PouÅ¾itÃ½ pÅ™Ã­klad

Espressif poskytuje oficiÃ¡lnÃ­ ukÃ¡zku MQTT klienta:

```bash
cd ~/esp
cp -r $IDF_PATH/examples/protocols/mqtt/tcp mqtt_client
cd mqtt_client
</code></pre>
<hr />
<h2>âš™ï¸ NastavenÃ­ MQTT serveru (brokeru)</h2>
<pre><code class="language-bash">idf.py menuconfig
</code></pre>
<ol>
<li>PÅ™ejdi do:</li>
<li><code>Example Configuration</code></li>
<li>ZmÄ›Åˆ:</li>
<li><em>Broker URI</em> â€“ napÅ™. <code>mqtt://broker.hivemq.com</code></li>
<li>Nebo vlastnÃ­: <code>mqtt://192.168.0.10:1883</code></li>
</ol>
<hr />
<h2>ğŸ§ª Kompilace a nahrÃ¡nÃ­</h2>
<pre><code class="language-bash">idf.py set-target esp32
idf.py build
idf.py -p /dev/ttyUSB0 flash monitor
</code></pre>
<hr />
<h2>ğŸ“‹ VÃ½stup</h2>
<p>Po pÅ™ipojenÃ­ k MQTT brokeru:</p>
<pre><code>I (3519) MQTT_CLIENT: MQTT_EVENT_CONNECTED
I (3529) MQTT_CLIENT: sent publish successful, msg_id=1234
</code></pre>
<hr />
<h2>ğŸ§  MQTT struktura (v kÃ³du)</h2>
<p>TypickÃ½ handler v <code>mqtt_client_main.c</code>:</p>
<pre><code class="language-c">esp_mqtt_client_handle_t client = esp_mqtt_client_init(&amp;mqtt_cfg);
esp_mqtt_client_start(client);
esp_mqtt_client_subscribe(client, &quot;/esp32/topic&quot;, 0);
esp_mqtt_client_publish(client, &quot;/esp32/topic&quot;, &quot;Hello MQTT&quot;, 0, 1, 0);
</code></pre>
<hr />
<h2>ğŸ” Podpora TLS</h2>
<p>V <code>menuconfig</code> mÅ¯Å¾eÅ¡ zapnout:
- <code>Enable SSL support</code>
- <code>Broker URI</code> pak nastav na <code>mqtts://...</code></p>
<hr />
<h2>ğŸ“Œ Tipy</h2>
<ul>
<li>Pro testovÃ¡nÃ­ mÅ¯Å¾eÅ¡ pouÅ¾Ã­t:</li>
<li>MQTT.fx</li>
<li>mosquitto_sub/pub</li>
<li>webovÃ½ nÃ¡stroj: https://mqtt-explorer.com
```</li>
</ul>
    <p><a href="../index.html">â† ZpÄ›t</a></p>
  </article>
</body>
</html>